{
    "version": 3,
    "terraform_version": "0.9.5",
    "serial": 7,
    "lineage": "0f3f48f2-91f6-4bde-b8dd-45767650a949",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {
                "ansible_inventory": {
                    "sensitive": false,
                    "type": "string",
                    "value": "production"
                },
                "backup_access_key_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "AKIAIQ5Y5K5O6CKFYU4A"
                },
                "backup_access_key_secret": {
                    "sensitive": false,
                    "type": "string",
                    "value": "21SIGeUNoloQhTzP1YzJL2uSahPrAlPZD6hbQor8"
                },
                "data_volume_size": {
                    "sensitive": false,
                    "type": "string",
                    "value": "10"
                },
                "dns_entries": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "shortener"
                    ]
                },
                "flavor": {
                    "sensitive": false,
                    "type": "string",
                    "value": "m1.tiny"
                },
                "has_backup": {
                    "sensitive": false,
                    "type": "string",
                    "value": "1"
                },
                "has_data_volume": {
                    "sensitive": false,
                    "type": "string",
                    "value": "1"
                },
                "ip_address": {
                    "sensitive": false,
                    "type": "string",
                    "value": "149.165.168.203"
                },
                "provisioner": {
                    "sensitive": false,
                    "type": "string",
                    "value": "terraform"
                },
                "region": {
                    "sensitive": false,
                    "type": "string",
                    "value": "iu"
                }
            },
            "resources": {},
            "depends_on": []
        },
        {
            "path": [
                "root",
                "single-machine"
            ],
            "outputs": {
                "address": {
                    "sensitive": false,
                    "type": "string",
                    "value": "149.165.168.203"
                },
                "dns_entries": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "voi",
                        "shortener"
                    ]
                },
                "user_access_key_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "AKIAIQ5Y5K5O6CKFYU4A"
                },
                "user_access_key_secret": {
                    "sensitive": false,
                    "type": "string",
                    "value": "21SIGeUNoloQhTzP1YzJL2uSahPrAlPZD6hbQor8"
                },
                "vm_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "TG-ASC170002-voi"
                }
            },
            "resources": {
                "aws_iam_access_key.backup-user-key": {
                    "type": "aws_iam_access_key",
                    "depends_on": [
                        "aws_iam_user.backup-user"
                    ],
                    "primary": {
                        "id": "AKIAIQ5Y5K5O6CKFYU4A",
                        "attributes": {
                            "id": "AKIAIQ5Y5K5O6CKFYU4A",
                            "secret": "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",
                            "ses_smtp_password": "Aom0DFPqb6vl7E+PIP8OlxoZFeofeb2KpmxUBzYG0Ws0",
                            "status": "Active",
                            "user": "backup-voi"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_user.backup-user": {
                    "type": "aws_iam_user",
                    "depends_on": [],
                    "primary": {
                        "id": "backup-voi",
                        "attributes": {
                            "arn": "arn:aws:iam::525453398140:user/backup-voi",
                            "force_destroy": "false",
                            "id": "backup-voi",
                            "name": "backup-voi",
                            "path": "/",
                            "unique_id": "AIDAJMVDY5NTRSHURTNN4"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_user_policy.backup-user-policy": {
                    "type": "aws_iam_user_policy",
                    "depends_on": [
                        "aws_iam_user.backup-user",
                        "data.terraform_remote_state.base"
                    ],
                    "primary": {
                        "id": "backup-voi:backup_voi",
                        "attributes": {
                            "id": "backup-voi:backup_voi",
                            "name": "backup_voi",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:ListBucket\"],\n      \"Resource\": [\"arn:aws:s3:::openmrs-backups\"]\n    },\n    {\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:ListMultipartUploadParts\",\n        \"s3:AbortMultipartUpload\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:s3:::openmrs-backups/voi/*\"\n    }\n  ]\n}\n",
                            "user": "backup-voi"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.terraform_remote_state.base": {
                    "type": "terraform_remote_state",
                    "depends_on": [],
                    "primary": {
                        "id": "2017-10-31 09:30:30.138966648 +0000 UTC",
                        "attributes": {
                            "backend": "s3",
                            "backup-bucket-arn": "arn:aws:s3:::openmrs-backups",
                            "backup-bucket-name": "openmrs-backups",
                            "config.%": "2",
                            "config.bucket": "openmrs-terraform-state-files",
                            "config.key": "basic-network-setup.tfstate",
                            "environment": "default",
                            "id": "2017-10-31 09:30:30.138966648 +0000 UTC",
                            "key-pair-name": "TG-ASC170002-terraform-key",
                            "network-id.%": "2",
                            "network-id.iu": "6821b1ed-8f18-47d7-8fbe-ac3278d193fe",
                            "network-id.tacc": "75bf4e09-609e-4868-8bb5-12fa8657627e",
                            "secgroup-http-name": "TG-ASC170002-https",
                            "secgroup-ssh-name": "TG-ASC170002-ssh-icmp"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "dme_record.cnames": {
                    "type": "dme_record",
                    "depends_on": [],
                    "primary": {
                        "id": "59083109",
                        "attributes": {
                            "domainid": "4712658",
                            "gtdLocation": "DEFAULT",
                            "id": "59083109",
                            "name": "shortener",
                            "ttl": "3600",
                            "type": "CNAME",
                            "value": "voi"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "dme_record.hostname": {
                    "type": "dme_record",
                    "depends_on": [
                        "openstack_compute_floatingip_v2.ip"
                    ],
                    "primary": {
                        "id": "59083129",
                        "attributes": {
                            "domainid": "4712658",
                            "gtdLocation": "DEFAULT",
                            "id": "59083129",
                            "name": "voi",
                            "ttl": "300",
                            "type": "A",
                            "value": "149.165.168.203"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "null_resource.ansible": {
                    "type": "null_resource",
                    "depends_on": [
                        "null_resource.upgrade",
                        "openstack_compute_floatingip_associate_v2.fip_vm",
                        "openstack_compute_floatingip_v2.ip",
                        "openstack_compute_instance_v2.vm"
                    ],
                    "primary": {
                        "id": "6159367125559474236",
                        "attributes": {
                            "id": "6159367125559474236"
                        },
                        "meta": {},
                        "tainted": true
                    },
                    "deposed": [],
                    "provider": ""
                },
                "null_resource.mount_data_volume": {
                    "type": "null_resource",
                    "depends_on": [
                        "openstack_compute_floatingip_v2.ip",
                        "openstack_compute_volume_attach_v2.attach_data_volume"
                    ],
                    "primary": {
                        "id": "4839153441064613921",
                        "attributes": {
                            "id": "4839153441064613921"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "null_resource.setup-dns": {
                    "type": "null_resource",
                    "depends_on": [
                        "null_resource.mount_data_volume",
                        "openstack_compute_floatingip_v2.ip",
                        "openstack_compute_instance_v2.vm"
                    ],
                    "primary": {
                        "id": "5927698749021146585",
                        "attributes": {
                            "id": "5927698749021146585"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "null_resource.upgrade": {
                    "type": "null_resource",
                    "depends_on": [
                        "null_resource.setup-dns",
                        "openstack_compute_floatingip_associate_v2.fip_vm",
                        "openstack_compute_floatingip_v2.ip",
                        "openstack_compute_instance_v2.vm"
                    ],
                    "primary": {
                        "id": "5586337515444027453",
                        "attributes": {
                            "id": "5586337515444027453"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "openstack_blockstorage_volume_v2.data_volume": {
                    "type": "openstack_blockstorage_volume_v2",
                    "depends_on": [],
                    "primary": {
                        "id": "9fe7289b-7ffd-4374-8a55-b66991438894",
                        "attributes": {
                            "attachment.#": "1",
                            "attachment.3024185315.device": "/dev/sdb",
                            "attachment.3024185315.id": "9fe7289b-7ffd-4374-8a55-b66991438894",
                            "attachment.3024185315.instance_id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f",
                            "availability_zone": "nova",
                            "description": "",
                            "id": "9fe7289b-7ffd-4374-8a55-b66991438894",
                            "metadata.%": "2",
                            "metadata.attached_mode": "rw",
                            "metadata.readonly": "False",
                            "name": "TG-ASC170002-data_volume",
                            "region": "",
                            "size": "10",
                            "snapshot_id": "",
                            "source_vol_id": "",
                            "volume_type": ""
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "openstack_compute_floatingip_associate_v2.fip_vm": {
                    "type": "openstack_compute_floatingip_associate_v2",
                    "depends_on": [
                        "openstack_compute_floatingip_v2.ip",
                        "openstack_compute_instance_v2.vm"
                    ],
                    "primary": {
                        "id": "149.165.168.203/a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f/",
                        "attributes": {
                            "fixed_ip": "",
                            "floating_ip": "149.165.168.203",
                            "id": "149.165.168.203/a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f/",
                            "instance_id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f",
                            "region": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "openstack_compute_floatingip_v2.ip": {
                    "type": "openstack_compute_floatingip_v2",
                    "depends_on": [],
                    "primary": {
                        "id": "a043ea83-7eab-4696-a7e2-5ae9edc8afcd",
                        "attributes": {
                            "address": "149.165.168.203",
                            "fixed_ip": "10.0.1.6",
                            "id": "a043ea83-7eab-4696-a7e2-5ae9edc8afcd",
                            "instance_id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f",
                            "pool": "public",
                            "region": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "openstack_compute_instance_v2.vm": {
                    "type": "openstack_compute_instance_v2",
                    "depends_on": [
                        "data.terraform_remote_state.base"
                    ],
                    "primary": {
                        "id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f",
                        "attributes": {
                            "access_ip_v4": "10.0.1.6",
                            "access_ip_v6": "",
                            "all_metadata.%": "0",
                            "availability_zone": "zone-r6",
                            "flavor_id": "1",
                            "flavor_name": "m1.tiny",
                            "force_delete": "false",
                            "id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f",
                            "image_id": "87e08a17-eae2-4ce4-9051-c561d9a54bde",
                            "image_name": "Ubuntu 16.04 LTS",
                            "key_pair": "TG-ASC170002-terraform-key",
                            "name": "TG-ASC170002-voi",
                            "network.#": "1",
                            "network.0.access_network": "false",
                            "network.0.fixed_ip_v4": "10.0.1.6",
                            "network.0.fixed_ip_v6": "",
                            "network.0.floating_ip": "149.165.168.203",
                            "network.0.mac": "fa:16:3e:20:18:74",
                            "network.0.name": "TG-ASC170002-terraform-private",
                            "network.0.port": "",
                            "network.0.uuid": "6821b1ed-8f18-47d7-8fbe-ac3278d193fe",
                            "security_groups.#": "2",
                            "security_groups.1401617901": "TG-ASC170002-ssh-icmp",
                            "security_groups.2195300949": "TG-ASC170002-https",
                            "stop_before_destroy": "false",
                            "volume.#": "0"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 1800000000000,
                                "delete": 1800000000000,
                                "update": 1800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "openstack_compute_volume_attach_v2.attach_data_volume": {
                    "type": "openstack_compute_volume_attach_v2",
                    "depends_on": [
                        "openstack_blockstorage_volume_v2.data_volume",
                        "openstack_compute_instance_v2.vm"
                    ],
                    "primary": {
                        "id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f/9fe7289b-7ffd-4374-8a55-b66991438894",
                        "attributes": {
                            "device": "/dev/sdb",
                            "id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f/9fe7289b-7ffd-4374-8a55-b66991438894",
                            "instance_id": "a8b1e287-ceb4-47e6-9da8-5e5fcfdd728f",
                            "region": "",
                            "volume_id": "9fe7289b-7ffd-4374-8a55-b66991438894"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        }
    ]
}
